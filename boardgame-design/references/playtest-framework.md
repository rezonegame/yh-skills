# Playtest Framework (Testing Framework)

完整的桌面游戏测试框架，包含场景生成、数据收集、分析和迭代工具。

## Quick Start Commands

| Command | Purpose |
|---------|---------|
| "记录playtest" | Record playtest results |
| "生成测试场景" | Generate playtest scenarios |
| "分析平衡性" | Analyze game balance |
| "诊断问题" | Diagnose game issues |
| "查看测试清单" | Show testing checklist |
| "收集玩家反馈" | Collect player feedback |

---

## 1. Playtest Scenario Generator

自动生成针对特定机制的测试场景。

### 场景类型

```
┌─────────────────────────────────────────────────────────────┐
│ A. 规则学习测试 (Rule Learning)                              │
│ B. 机制执行测试 (Mechanic Execution)                         │
│ C. 策略深度测试 (Strategic Depth)                            │
│ D. 玩家交互测试 (Player Interaction)                         │
│ E. 边界情况测试 (Edge Cases)                                 │
│ F. 平衡性测试 (Balance)                                      │
└─────────────────────────────────────────────────────────────┘
```

### 使用示例

```
用户: "生成资源管理机制的测试场景"

系统生成：
1. 新玩家首次理解资源流动 (规则学习)
2. 玩家在资源短缺时的决策 (策略深度)
3. 多玩家竞争有限资源的交互 (玩家交互)
4. 资源组合策略的有效性 (平衡性)
5. 边界：零资源、满资源、溢出 (边界情况)
```

---

## 2. Playtest Question Bank

### A. 规则清晰度 (Clarity)

**基础问题：**
- 你能用自己的话解释胜利条件吗？
- 你知道每个回合能做什么吗？
- 有哪个规则让你感到困惑？
- 你需要查阅规则书的频率？

**深度问题：**
- 卡牌/效果的描述是否有歧义？
- 规则术语是否一致？
- 图标与文字是否匹配？
- 规则书的逻辑顺序是否合理？

**观察指标：**
- 第一次游戏时的错误次数
- 需要解释的次数
- 查阅规则书的频率
- 游戏速度随局数的变化

### B. 策略深度 (Strategy)

**基础问题：**
- 你觉得有明显的最佳策略吗？
- 你的决策有意义吗？
- 你能预测其他玩家的行动吗？
- 游戏后期是否已无悬念？

**深度问题：**
- 有多少可行的获胜路径？
- 新手和老手的差距有多大？
- 是否有"必胜"或"必败"的开局？
- 决策的权重是否合理？

**观察指标：**
- 不同策略的胜率差异
- 决策时间分布
- 玩家分数的标准差
- 第一玩家的优势程度

### C. 玩家交互 (Interaction)

**基础问题：**
- 你会关注其他玩家的行动吗？
- 你能影响或干扰其他玩家吗？
- 游戏是否感觉像"多人单人游戏"？
- 你觉得与其他玩家的互动有趣吗？

**深度问题：**
- 互动是自愿还是强制的？
- 落后玩家能追赶吗？
- 是否有"国王制造"现象？
- 互动的机会是否足够？

**观察指标：**
- 玩家之间的交易/冲突次数
- 落后玩家的追赶成功率
- 最后两轮的悬念程度
- 联盟/背叛的出现频率

### D. 游戏节奏 (Pacing)

**基础问题：**
- 游戏长度是否合适？
- 有哪个阶段显得拖沓？
- 游戏结局是否突然？
- 你觉得什么时候胜负已分？

**深度问题：**
- 游戏前中后期的节奏分布？
- 是否有"垃圾时间"？
- 关键决策点是否分布均匀？
- 游戏长度与玩家数量的关系？

**观察指标：**
- 每回合平均时长
- 决策时间分布
- 胜负已分的时刻
- 总游戏时长 vs 目标时长

### E. 情感体验 (Emotional Experience)

**基础问题：**
- 游戏让你有什么感觉？
- 最兴奋/最沮丧的时刻是什么？
- 你想再玩一次吗？
- 你会推荐给朋友吗？

**深度问题：**
- 失败后是否感到不公？
- 胜利是否满足？
- 是否有"无力感"时刻？
- 主题与机制是否契合？

**观察指标：**
- 玩家情绪变化曲线
- 正面/负面情绪比例
- 重玩意愿评分
- 推荐意愿评分

---

## 3. Structured Data Collection Templates

### A. 基础信息模板

```markdown
# Playtest Record: [GameName] v[X.X.X]

## 元数据 (Metadata)
- **日期**: YYYY-MM-DD
- **测试者**: [姓名/代号]
- **玩家数**: X / [推荐范围]
- **玩家经验**: [Beginner/Intermediate/Expert]
- **游戏时长**: XX 分钟 (目标: XX 分钟)
- **场景类型**: [Rule Learning/Mechanic/Strategy/Balance/Edge Case]

## 测试目标
本次测试主要验证：
1. [目标 1]
2. [目标 2]

## 游戏结果
- **获胜者**: Player X
- **最终分数**: [P1: X, P2: Y, P3: Z]
- **游戏结束方式**: [胜利条件/回合限制/弃局]
```

### B. 问题记录模板

```markdown
## 问题记录 (Issues)

| ID | 类型 | 严重度 | 描述 | 触发条件 |
|----|------|--------|------|----------|
| I1 | Clarity | High | 玩家不理解X机制 | 第一次使用X时 |
| I2 | Balance | Medium | 策略A过强 | 玩家选择A时 |
| I3 | Fit | Low | 主题不匹配 | 角色行动时 |

**严重度定义**：
- Critical: 游戏无法进行或需要重置
- High: 显著影响体验，必须修复
- Medium: 部分玩家体验下降
- Low: 小问题，可接受
```

### C. 定量数据模板

```markdown
## 定量数据 (Metrics)

### 游戏节奏
- 每回合时长: [R1: X min, R2: Y min, ...]
- 总时长: XX 分钟
- 目标时长: XX 分钟
- 偏差: ±XX 分钟

### 决策分析
- 平均决策时间: XX 秒
- 最长决策时间: XX 秒 (玩家: X, 回合: Y)
- 决策瘫痪次数: X 次 (>30秒)

### 经济/资源分析
- 资源总量变化: [开始: X, 结束: Y]
- 资源流通速度: X/回合
- 稀缺资源: [资源A, 资源B]
- 溢出资源: [资源C]

### 交互统计
- 玩家间冲突次数: X 次
- 交易/合作次数: Y 次
- 直接干扰次数: Z 次
- 被动观察次数: W 次

### 策略多样性
- 不同策略数量: X 种
- 策略转换次数: Y 次
- 主导策略: [策略A] (胜率: X%)

### 误差统计
- 规则理解错误: X 次
- 操作失误: Y 次
- 需要纠正: Z 次
```

### D. 玩家反馈模板

```markdown
## 玩家反馈 (Player Feedback)

### 开局前 (Pre-game)
- 对游戏的期待: [自由回答]
- 玩过类似游戏: [是/否，哪款]
- 担心的方面: [自由回答]

### 游戏中 (In-game)
- 最困惑的时刻: [时刻 + 原因]
- 最兴奋的时刻: [时刻 + 原因]
- 想要放弃的时刻: [时刻 + 原因]
- "我没想到..."的发现: [描述]

### 游戏后 (Post-game)
- 整体体验评分: [1-10]
- 最喜欢的部分: [描述]
- 最不喜欢的部分: [描述]
- 会再玩一次: [是/否/可能]
- 会推荐给朋友: [是/否/可能]
- 改进建议: [自由回答]

### 深度问题
- 胜利/失败是否公平: [为什么]
- 主题是否突出: [描述]
- 规则是否容易记住: [是/否，原因]
- 哪些组件最有趣: [列举]
```

---

## 4. Balance Analysis Tools

### A. 经济平衡分析框架

```python
# 资源流动分析框架
def analyze_economy(data):
    """
    分析游戏经济系统的平衡性

    检查项：
    1. 资源增长速度是否过快/过慢
    2. 稀缺性是否随游戏推进变化
    3. 是否有资源溢出/浪费
    4. 领跑者是否有雪球效应
    """
    return {
        "growth_rate": "每回合资源增长率",
        "scarcity_curve": "稀缺性随回合变化",
        "waste_ratio": "溢出资源比例",
        "snowball_effect": "领先优势是否扩大"
    }
```

### B. 策略胜率矩阵

```markdown
| 策略 vs 策略 | 策略A | 策略B | 策略C | 策略D |
|-------------|-------|-------|-------|-------|
| 策略A | - | 55% | 60% | 45% |
| 策略B | 45% | - | 50% | 70% |
| 策略C | 40% | 50% | - | 55% |
| 策略D | 55% | 30% | 45% | - |

**平衡指标**：
- 所有策略平均胜率应在 45-55% 之间
- 最大胜率差 < 20%
- 每个策略至少有一个克制关系
```

### C. 玩家数体验矩阵

```markdown
| 玩家数 | 游戏时长 | 交互强度 | 策略深度 | 平衡性 | 推荐度 |
|--------|----------|----------|----------|--------|--------|
| 2人 | 45min | ⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ✓ 推荐 |
| 3人 | 60min | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ✓✓ 最佳 |
| 4人 | 75min | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ | ✓ 可行 |
| 5人 | 90min | ⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐ | ✗ 不推荐 |
```

---

## 5. Automated Testing Checklists

### Alpha 阶段检查 (内部测试)

```markdown
### 规则验证
- [ ] 规则书无矛盾
- [ ] 所有关键词有定义
- [ ] 术语使用一致
- [ ] 示例与规则匹配

### 核心机制
- [ ] 回合结构完整
- [ ] 胜利条件可达
- [ ] 资源系统运作
- [ ] 冲突解决有效

### 边界情况
- [ ] 最小玩家数可行
- [ ] 最大玩家数不崩溃
- [ ] 零资源状态有处理
- [ ] 溢出状态有处理
```

### Beta 阶段检查 (友好测试)

```markdown
### 学习曲线
- [ ] 新玩家能独立学会
- [ ] 第一次游戏可完成
- [ ] 规则查询频率 < 5次/局
- [ ] 错误率 < 3次/局

### 体验验证
- [ ] 决策有意义
- [ ] 玩家有交互
- [ ] 节奏不拖沓
- [ ] 结局有满足感

### 平衡性
- [ ] 无必胜策略
- [ ] 无必败开局
- [ ] 不同策略可行
- [ ] 落后可追赶
```

### Blind 测试检查 (陌生人测试)

```markdown
### 规则书质量
- [ ] 无需教学可学会
- [ ] 问题可快速找到答案
- [ ] 图表清晰易懂
- [ ] 示例覆盖疑问

### 组件质量
- [ ] 组件可识别
- [ ] 信息可读
- [ ] 操作流畅
- [ ] 耐用性足够

### 最终验证
- [ ] 目标玩家群体满意
- [ ] 重玩意愿 > 60%
- [ ] 推荐意愿 > 50%
- [ ] 无阻塞性问题
```

---

## 6. Analysis Templates

### A. 问题优先级矩阵

```
┌────────────────────────────────────────────────────────────┐
│                     影响 x 概率 矩阵                          │
├────────────────────────────────────────────────────────────┤
│ 高影响/高概率 → Critical (立即修复)                          │
│ 高影响/低概率 → High (优先修复)                              │
│ 低影响/高概率 → Medium (计划修复)                            │
│ 低影响/低概率 → Low (考虑修复)                               │
└────────────────────────────────────────────────────────────┘
```

### B. 迭代分析报告模板

```markdown
## 迭代分析报告: [GameName] v[X.X.X]

### 问题汇总
- Critical: X 个
- High: Y 个
- Medium: Z 个
- Low: W 个

### 5-Component 分析
| Component | 评分 | 主要问题 | 建议 |
|-----------|------|----------|------|
| Clarity | 6/10 | 术语不一致 | 统一术语 |
| Strategy | 8/10 | 策略A过强 | 削弱A |
| Interaction | 7/10 | 2人时交互少 | 增加强制交互 |
| Satisfaction | 9/10 | - | - |
| Fit | 8/10 | - | - |

### 优先修复列表
1. [Critical] 修复规则矛盾
2. [High] 削弱策略A
3. [Medium] 增加交互

### 版本建议
建议版本变更: v0.1.0 → v0.1.1 (PATCH)
```

---

## 7. Metrics & KPIs

### 测试成功率目标

```markdown
| 指标 | Alpha | Beta | Release |
|------|-------|------|---------|
| 规则理解率 | >60% | >80% | >90% |
| 首次完成率 | >50% | >75% | >90% |
| 重玩意愿 | >40% | >60% | >75% |
| 推荐意愿 | >30% | >50% | >70% |
| 目标时长偏差 | ±20% | ±15% | ±10% |
```

### 问题收敛目标

```markdown
| 阶段 | 新问题/测试 | 总问题 |
|------|-------------|--------|
| Alpha | < 3个 | < 20个 |
| Beta | < 1个 | < 10个 |
| Blind | < 0.5个 | < 5个 |
```

---

## 8. Integration with Iteration Mode

测试框架与迭代模式的集成：

```markdown
Playtest Framework:
    ├─ 生成测试场景
    ├─ 收集数据
    └─ 分析结果
            │
            ▼
Iteration Mode:
    ├─ Record: 记录测试
    ├─ Analysis: 分析迭代
    └─ Plan: 生成计划
```

---

**See Also**:
- `iteration-testing.md` - 迭代测试深度方法论
- `5-component-rubric.md` - 5组件评估标准
- `templates.md` - 测试模板和脚本
